<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge"> -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Salon Beatles</title>
  <!-- icono del la pestaña -->
  <link rel="shortcut icon" href="./Biblioteca/Gifs/nerv.gif">
<!-- link de la libreria para leer las etiquetas de aframe -->
<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/zcanter/aframe-gradient-sky/master/dist/gradientsky.min.js"></script>
<!-- script mirror -->
<script src="https://unpkg.com/aframe-mirror-component/dist/aframe-mirror-component.min.js"></script>
<!-- script para gifs -->
<script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
<script src="https://rawgit.com/mayognaise/aframe-gif-component/master/dist/aframe-gif-component.min.js"></script>
<!-- para leer animación -->
<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
<!-- script para texturas -->
<script src="https://cdn.jsdelivr.net/npm/aframe-enviropacks@latest/aframe-enviropacks.js"></script>
<!-- script para texto en 3d -->
<script src="https://unpkg.com/aframe-text-geometry-component@0.5.2/dist/aframe-text-geometry-component.min.js"></script>
<!-- script para interacciones -->
<script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
<!-- LIBRERIAS DE COLISIONES Y FÍSICAS-->
<script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>
<!-- scripts movimiento de la cámara -->
<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
<script src="https://unpkg.com/super-hands@2.0.2/dist/super-hands.min.js"></script>
<!-- scripts para partículas-->
<script src="https://unpkg.com/aframe-animation-component@3.2.1/dist/aframe-animation-component.min.js"></script>
<script src="https://unpkg.com/aframe-particle-system-component@1.1.3/dist/aframe-particle-system-component.min.js"></script>
<script src="https://unpkg.com/aframe-extras.ocean@latest/dist/aframe-extras.ocean.min.js"></script>
<!-- scripts para enviroments-->
<script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
<!-- scipts para animacion de agua -->
<script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.0.0/dist/aframe-extras.min.js"></script>
<!-- script para trayectorias -->
<script src="https://unpkg.com/aframe-alongpath-component@^1.1.0/dist/aframe-alongpath-component.min.js"></script>

  <!-- scripts para truco de transparencia en modelos 3d-->
  <script>
      AFRAME.registerComponent('model-opacity', {
          schema: { default: 1.0 },
          init: function () {
              // this.el.addEventListener('model-loaded', this.update.bind(this));
              this.el.addEventListener("model-loaded", () => {
                  const object3DEl = this.el.object3DMap;
                  ;








                  var mesh = this.el.getObject3D('mesh'); // For hand, the result is undefined
                  // var mesh = this.el.object3DMap.mesh; // For hand, the result is undefined
                  console.log(mesh);
                  var data = this.data;
                  if (!mesh) { return; }
                  mesh.traverse(function (node) {
                      if (node.isMesh) {
                          ;
                          node.material.opacity = data;
                          node.material.transparent = data < 1.0;
                          node.material.needsUpdate = true;
                      }
                  });
              }, 2000)
















          },
          update: function () {
              var mesh = this.el.getObject3D('mesh');
              var data = this.data;
              if (!mesh) { return; }
              mesh.traverse(function (node) {
                  if (node.isMesh) {
                      ;
                      node.material.opacity = data;
                      node.material.transparent = data < 1.0;
                      node.material.needsUpdate = true;
                  }
              });
          }
      });
  </script>
</head>
  
  <body>
    <a-scene light="defaultLightsEnabled: false" fog="color: #FFFFBA; far: 12; density:.4" shadow="type: basic" physics="gravity: -0; debug: false" reflection="directionalLight:a-light#dirlight;">
      <a-asset>

        <!-- Texturas -->
        <img id="piso" src="./Biblioteca/Sala 1 Beatles/Texturas/Piso.jpg">
        <img id="pared" src="./Biblioteca/Sala 1 Beatles/Texturas/Pared.jpg">
        <!-- pared -->
        <img id="Mp1diffuse" src="./Biblioteca/Sala 2 Elton/Texturas/Pared/TilesTerrazzoVenetianPolished001_COL_VAR1_1K.jpg">
        <img id="Mp1roughness" src="./Biblioteca/Sala 2 Elton/Texturas/Pared/TilesTerrazzoVenetianPolished001_GLOSS_1K.jpg">
        <img id="Mp1normal" src="./Biblioteca/Sala 2 Elton/Texturas/Pared/TilesTerrazzoVenetianPolished001_NRM_1K.png">
        <!-- suelo -->
        <img id="Ms1diffuse" src="./Biblioteca/Sala 2 Elton/Texturas/Piso/cobblestone_floor_08_diff_1k.jpg">
        <img id="Ms1roughness" src="./Biblioteca/Sala 2 Elton/Texturas/Piso/cobblestone_floor_08_rough_1k.jpg">
        <img id="Ms1normal" src="./Biblioteca/Sala 2 Elton/Texturas/Piso/cobblestone_floor_08_nor_gl_1k.jpg">
        <img id="Ms1metalness" src="./Biblioteca/Sala 2 Elton/Texturas/Piso/cobblestone_floor_08_arm_1k.jpg">
         <!-- madera -->
         <img id="M1diffuse" src="./Biblioteca/Texturas/M1/M1diff_1k.jpg">
         <img id="M1roughness" src="./Biblioteca/Texturas/M1/M1rough_1k.jpg">
         <img id="M1normal" src="./Biblioteca/Texturas/M1/M1nor_gl_1k.jpg">
         <!-- Metal bronce -->
         <img id="M2diffuse" src="./Biblioteca/Texturas/M2/MetalBronzeWorn001_COL_2K_METALNESS.png">
         <img id="M2roughness" src="./Biblioteca/Texturas/M2/MetalBronzeWorn001_ROUGHNESS_2K_METALNESS.png">
         <img id="M2normal" src="./Biblioteca/Texturas/M2/MetalBronzeWorn001_NRM_2K_METALNESS.png">
         <img id="M2metalness" src="./Biblioteca/Texturas/M2/MetalBronzeWorn001_ROUGHNESS_2K_METALNESS.png">

        <!-- Señaletica -->
        <img id="salida" src="./Biblioteca/Señaletica/Salida.png">

        <!-- modelos -->
        <a-asset-item id="escaparate" src="./Biblioteca/Sala 2 Elton/Modelos/Remplazos/lentes elton.glb"></a-asset-item>
        <a-asset-item id="rockola" src="./Biblioteca/Sala 2 Elton/Modelos/rockola.gltf"></a-asset-item>
        <a-asset-item id="sillon" src="./Biblioteca/Sala 2 Elton/Modelos/sillon.gltf"></a-asset-item>
        <a-asset-item id="bird" src="./Biblioteca/Sala 2 Elton/Modelos/Bird.gltf"></a-asset-item>
        <a-asset-item id="piano" src="./Biblioteca/Sala 2 Elton/Modelos/piano.gltf"></a-asset-item>
        <a-asset-item id="cara" src="./Biblioteca/Sala 2 Elton/Modelos/glases.gltf"></a-asset-item>
        

        <!-- animados -->
        <!-- <a-asset-item id="A2" src="./Biblioteca/Modelos/con animacion/A2/A2.gltf"></a-asset-item> -->
        
        <!-- Audio -->
        <audio id="backgroundMusic" src="./Biblioteca/Sala 2 Elton/Audio/iIm Still Standing.mp3"></audio>
        
        <!-- video-->
        <video id="historia" controls="true" src="./Biblioteca/Sala 2 Elton/Videos/eltonhistoria.mp4"></video>

        <!-- disco -->
        <img id="discoelton" src="./Biblioteca/Sala 2 Elton/Disco/disc.png">
      
      
      </a-asset>

      <!-- camara -->
      <a-entity 
       movement-controls 
       kinematic-body>
        <a-entity 
         id="camera" 
         camera position="0 1.6 0" 
         look-controls >
          <a-entity 
           cursor="fuse: false;"
           position="0 0 -.1" 
           geometry="primitive: ring; radiusInner: 0.001; radiusOuter: 0.002" material="color: #000000; shader: flat">
          </a-entity>
        </a-entity>
      </a-entity>

        <!-- luz general -->
        <a-sphere 
          position="0 4 0" 
          rotation="0 0 0"
          color="#FFFFFF"
          scale=".1 .1 .1" 
          light="type: point; color: #FFFFFF; castshadow:true; intensity: 1" 
          ></a-sphere>
      <!-- Paredes -->
      <a-box 
        position="6 3 0" 
        rotation="0 0 0" 
        material="src: #Mp1diffuse; roughnessMap: #Mp1roughness; normalMap: #Mp1normal; repeat: 5 5; flatShading: true; metalness: 0; roughness: 1; receiveShadow:true; castShadow: true" 
        scale=".5 6 12" 
        side="double"
        static-body>
      </a-box>
      <a-box 
       position="-6 3 0" 
       rotation="0 0 0" 
       material="src: #Mp1diffuse; roughnessMap: #Mp1roughness; normalMap: #Mp1normal; repeat: 5 5; flatShading: true; metalness: 0; roughness: 1; receiveShadow:true; castShadow: true"
       scale=".5 6 12" 
       side="double"
       static-body>
      </a-box>
      <a-box 
       position="0 3 6" 
       rotation="0 90 0" 
       material="src: #Mp1diffuse; roughnessMap: #Mp1roughness; normalMap: #Mp1normal; repeat: 5 5; flatShading: true; metalness: 0; roughness: 1; receiveShadow:true; castShadow: true" 
       scale=".5 6 12" 
       side="double"
       static-body>
      </a-box>
      <a-box 
       position="0 3 -6" 
       rotation="0 90 0" 
       material="src: #Mp1diffuse; roughnessMap: #Mp1roughness; normalMap: #Mp1normal; repeat: 5 5; flatShading: true; metalness: 0; roughness: 1; receiveShadow:true; castShadow: true" 
       scale=".5 6 12" side="double"
       static-body>
      </a-box>

      <!-- Suelo -->
      <a-plane 
       static-body 
       position="0 0 0" 
       rotation="-90 0 0" 
       color="#0e23aa" 
       scale="50 50" 
       opacity="0">
      </a-plane>
      <a-box 
       position="0 0 0" 
       rotation="0 90 0" 
       material="src: #Ms1diffuse; roughnessMap: #Ms1roughness; normalMap: #Ms1normal; metalnessMap: #Ms1metalness; repeat: 20 20; flatShading: true; metalness: 0; roughness: 1; receiveShadow:true; castShadow: true" 
       scale="20 .5 20" 
       side="double"
       static-body>
      </a-box>

      <!-- Techo -->
      <a-box 
       position="0 5 0" 
       rotation="0 90 0" 
       material="src: #Mp1diffuse; roughnessMap: #Mp1roughness; normalMap: #Mp1normal; repeat: 5 5; flatShading: true; metalness: 0; roughness: 1; receiveShadow:true; castShadow: true" 
       scale="12 .5 12" 
       side="double">
      </a-box>

      <!-- estatua -->
      <a-entity 
       position="-4 1 -4" 
       rotation="0 30 0">
       <a-entity 
        gltf-model="#escaparate" 
        position="0 .6 0" 
        rotation="0 0 0" 
        scale=".1 .1 .1" 
        material="flatShading: true; metalness: 0; roughness: 1; castShadow: true; receiveShadow: true"
        static-body>
       </a-entity>
       <!-- Caja mueble 1 -->
       <a-box 
         position="0 0 0" 
         scale="1 1.2 1"  
         material="src: #M1diffuse; roughnessMap: #M1roughness; normalMap: #M!normal; repeat:2 2; flatShading: true; receiveShadow:true; castShadow: true"
         static-body>
       </a-box>
       <!-- Caja mueble 2 -->
       <a-box 
        position="0 0 0"
        rotation="0 40 0" 
        scale="1 1.2 1"  
        material="src: #M1diffuse; roughnessMap: #M1roughness; normalMap: #M!normal; repeat:2 2; flatShading: true; receiveShadow:true; castShadow: true"
        static-body>
      </a-box>
      </a-entity>


      <!-- Sillones -->
      <!-- sillon 1 -->
      <a-entity 
      gltf-model="#sillon" 
      position="-2 .25 4.8" 
      rotation="0 -195 0" 
      scale="1.5 1.5 1.5" 
      material="flatShading: true; metalness: 0; roughness: 1; castShadow: true; receiveShadow: true"
      static-body>
     </a-entity>
     <!-- sillon 2 -->
     <a-entity 
      gltf-model="#sillon" 
      position="2 .25 4.80" 
      rotation="0 -155 0" 
      scale="1.5 1.5 1.5" 
      material="flatShading: true; metalness: 0; roughness: 1; castShadow: true; receiveShadow: true"
      static-body>
     </a-entity>

<!-- modelo ave -->
<a-entity 
  id="birde"
  gltf-model="#bird" 
  position="5 3 0" 
  rotation="0 180 0" 
  scale="1 1 1" 
  material="flatShading: true; metalness: 0; roughness: 1; castShadow: true; receiveShadow: true"
  animation-mixer>
</a-entity>

<script>
// Obtiene la entidad del ave
var bird = document.querySelector('#birde');

// Define la trayectoria circular que el ave seguirá
var radius = 5;
var speed = 0.01;
var theta = 0;

// Crea una función de animación
function animate() {
  // Calcula la nueva posición del ave
  var x = radius * Math.cos(theta);
  var y = 3;
  var z = radius * Math.sin(theta);

  // Actualiza la posición del ave
  bird.setAttribute('position', {x: x, y: y, z: z});

  // Calcula la rotación del ave para que mire en la dirección de su movimiento
  var rotationY = theta * (-180 / Math.PI) + -90;
  bird.setAttribute('rotation', {x: 0, y: rotationY, z: 0});

  // Actualiza el ángulo para la próxima frame
  theta += speed;

  // Solicita la próxima frame de animación
  requestAnimationFrame(animate);
}

// Inicia la animación
animate();
</script>


     <!-- piano -->
     <a-entity 
      gltf-model="#piano" 
      position="-5 .25 0" 
      rotation="0 180 0" 
      scale="1 1 1" 
      material="flatShading: true; metalness: 0; roughness: 1; castShadow: true; receiveShadow: true"
      static-body>
     </a-entity>


      <!-- modelo animado -->
      <!-- <a-entity
       gltf-model="#A2"
       position="5 .3 -1"
       rotation="0 -90 0" 
       scale="1 1 1"
       material="flatShading: true; metalness: 0; roughness: 0; castShadow: true; receiveShadow: true"
       animation-mixer>
      </a-entity> -->
             
      <!-- Puerta de salida -->
      <a-entity
      position="0 0 5.75"
      rotation="0 180 0" 
      event-set__1="_event: mouseenter; _target: #PS; intensity:3; color: #EB291A; angle:25"
      event-set__2="_event: mouseleave; _target: #PS; intensity:1.5; color: #FFFFFF; angle:15">
        <!-- Logo -->
        <a-image 
        src="#salida" 
        position=".04 2 .1" 
        width="1"
        height=".5" 
        scale=".5 .5 .5"
        side="double" 
        material="shader: standard; flatShading: true; metalness: 0; roughness: 1; castShadow: true; receiveShadow: true; transparent: true; opacity: 1"
        ></a-image>
       <!-- Spot puerta -->
       <a-light 
       id="PS"
       type="spot" 
       color="#FFffff" 
       position="0 0 4" 
       rotation="15 0 0" 
       intensity="1.5" 
       angle="15" 
       penumbra="0.4" 
       castshadow="true"
       animation="property: rotation; to: 5 0 ; dir: alternate; easeInElastic: linear; loop: true;dur: 1500"
       ></a-light>
       <!-- Puerta -->
       <a-entity 
       position="0 1.5 0"
       rotation="0 90 0"
       link="href: index.html" 
       clickable
       ><a-box position="0 0 0" rotation="0 0 0" material="src: #M1diffuse; roughnessMap: #M1roughness; normalMap: #M!normal; repeat:1 1; flatShading: true; receiveShadow:true; castShadow: true" scale=".1 2.5 1.2" side="double"></a-box>
       <!-- Marco -->
       <a-box position="0 0 .6" rotation="0 0 0" material="src: #M1diffuse; roughnessMap: #M1roughness; normalMap: #M!normal; repeat:1 1; flatShading: true; receiveShadow:true; castShadow: true" scale=".15 2.5 .05" side="double" ></a-box>
       <a-box position="0 0 -.6" rotation="0 0 0" material="src: #M1diffuse; roughnessMap: #M1roughness; normalMap: #M!normal; repeat:1 1; flatShading: true; receiveShadow:true; castShadow: true" scale=".15 2.5 .05" side="double"></a-box>
       <a-box position="0 1.25 0" rotation="0 0 0" material="src: #M1diffuse; roughnessMap: #M1roughness; normalMap: #M!normal; repeat:1 1; flatShading: true; receiveShadow:true; castShadow: true" scale=".15 .05 1.25" side="double" ></a-box>
       <!-- Pomo -->
       <a-sphere position="-.11 -.1 .4" radius=".04" material="src: #M2diffuse; roughnessMap: #M2roughness; normalMap: #M2normal; metalnessMap: #M2metalness; repeat:2 2; flatShading: true; receiveShadow:true; castShadow: true"></a-sphere></a-entity>
      </a-entity>
      <!-- Video -->
      <a-entity 
       position="0 2 -5.5">
       <!-- Texto -->
       <a-entity
         text-geometry="value: Videoteca; bevelEnabled: true; align:center; bevelSize: 0.015; bevelThickness: 0.01; curveSegments: 5"
         material="shader: standard; color:#000000"
         Scale="1 1 1" 
         rotation="0 0 0" 
         position="-1.6 1 0"
         scale="0.1 0.1 0.1">
       </a-entity>
       <!-- Video -->
       <a-video 
         id="video" 
         src="#historia" 
         width="16" 
         height="9" 
         position="0 0 0" 
         scale=".2 .2. .2">
       </a-video>
       <!-- Esfera play -->
       <a-sphere 
         id="playSphere" 
         position="-1 -.5 0" 
         radius="0.2" 
         color="#EF2D5E"
         animation__click="property: scale; startEvents: click; to: 1.1 1.1 1.1; dir: alternate"
         animation__color="property: color; startEvents: click; to: #FF0000; dir: alternate"
         animation__reset="property: scale; startEvents: reset; delay: 2000; dur: 500; to: 1 1 1"
         animation__resetColor="property: color; startEvents: reset; delay: 2000; dur: 500; to: #EF2D5E">
         <!-- Texto -->
          <a-text 
           value="Play" align="center" 
           color="#FFFFFF" 
           position="0 0 0.21">
         </a-text>
       </a-sphere>
       <!-- esfera pausa -->
       <a-sphere 
         id="pauseSphere" 
         position="1 -.5 0"
         radius="0.2" 
         color="#FFC65D"
         animation__click="property: scale; startEvents: click; to: 1.1 1.1 1.1; dir: alternate"
         animation__color="property: color; startEvents: click; to: #0000FF; dir: alternate"
         animation__reset="property: scale; startEvents: reset; delay: 2000; dur: 500; to: 1 1 1"
         animation__resetColor="property: color; startEvents: reset; delay: 2000; dur: 500; to: #FFC65D">
         <!-- Texto -->
         <a-text 
           value="Pause" 
           align="center" 
           color="#FFFFFF" 
           position="0 0 0.21">
         </a-text>
       </a-sphere>
      </a-entity>
      <!-- Script funcionamiento -->
      <script>
        var videoEl = document.querySelector('#video');
        var video = document.querySelector('#historia');
        var playSphere = document.querySelector('#playSphere');
        var pauseSphere = document.querySelector('#pauseSphere');
      
        playSphere.addEventListener('click', function () {
          video.play();
          playSphere.emit('reset');
        });
      
        pauseSphere.addEventListener('click', function () {
          video.pause();
          pauseSphere.emit('reset');
        });
      </script>

      <!-- Reproductor -->
      <!-- musica -->
      <a-entity 
       sound="src: #backgroundMusic" 
       id="sonido">
      </a-entity>
      <a-entity 
       position="5 .5 0" 
       rotation="0 -90 0">
        </a-box>
        <!-- rockola -->
        <a-entity 
         gltf-model="#rockola" 
         material="flatShading: true; metalness: 0; roughness: 1; castShadow: true; receiveShadow: true" 
         scale="1.5 1.5 1.5" 
         position="0 -.2 0">
        </a-entity>
        <!-- disco -->
        <a-image 
         id="disco"
         src="#discoelton" 
         position="0 1.1 .55" 
         scale=".5 .5 .5" 
         rotation="0 0 0" >
        </a-image>
        <!-- Controles de reproducción -->
        <!-- Play -->
        <a-box 
         id="playButton" 
         position="-.7 .6 .5" 
         color="#FFFFFF" 
         scale=".3 .3 .3">
          <a-text 
           value="Play" align="center" 
           color="#FFFFFF" 
           position="0 1 0" 
           scale="2 2 2">
          </a-text>
        </a-box>
        <!-- pausa -->
        <a-box 
         id="pauseButton" 
         position=".7 .6 .5" 
         color="#000000" 
         scale=".3 .3 .3">
          <a-text 
           value="Pause" 
           align="center" 
           color="#FFFFFF" 
           position="0 1 0" 
           scale="2 2 2">
          </a-text>
        </a-box>
      </a-entity>
      <!-- Script reproduccion -->
      <script>
        var sonido = document.querySelector('#sonido');
        var disco = document.querySelector('#disco');
        var playButton = document.querySelector('#playButton');
        var pauseButton = document.querySelector('#pauseButton');
    
        playButton.addEventListener('click', function () {
          sonido.components.sound.playSound();
          disco.setAttribute('animation', 'property: rotation; to: 0 0 360; loop: true; dur: 1000; easing: linear');
        });
    
        pauseButton.addEventListener('click', function () {
          sonido.components.sound.pauseSound();
          disco.removeAttribute('animation');
          disco.setAttribute('animation', 'property: rotation; to: 0 0 0; dur: 1000; easing: linear');
        });
      </script>




    </a-scene>

      <div class="a-loader-title" style="display: none;">Proyecto</div>
    </a-scene>
  </body>
</html>